{% if site.disqus %}
<script data-isso="https://isso.madyanne.fr/" 
        src="https://isso.madyanne.fr/js/count.min.js" async>
</script>
{% endif %}
{% if paginator.posts %}
  <section class="section  typeset">
    <ul class="list  list--posts">
      {% for page in paginator.posts %}
        <li class="item  item--post">
          <article class="article  article--post">
            <h2><a href="{{ site.baseurl }}{{ page.url }}">{{ page.title }}</a></h2>
            {% include post-meta.html %}<a class="comment-count" href="{{ page.url }}#isso-thread">0 commentaire</a>
            {{ page.excerpt | markdownify | truncatewords: 60 }}
          </article>
        </li>
      {% endfor %}
    </ul>
    {% include post-pagination.html %}
  </section>
{% else %}
  <section class="section  typeset">
    <ul class="list  list--posts">
      {% for page in site.posts %}
        <li class="item  item--post">
          <article class="article  article--post">

            <h2><a href="{{ site.baseurl }}{{ page.url }}">{{ page.title }}</a></h2>
            {% include post-meta.html %}
            {{ page.excerpt | strip_newlines | markdownify | truncatewords: 60 }}

          </article>
        </li>
      {% endfor %}
    </ul>
  </section>
{% endif %}
<script type="text/javascript">
function cleanComments() {
  var todelete = [];
  var x = document.getElementsByClassName("comment-count");
  for (i = 0; i < x.length; i++) {
      if ( x[i].innerText[0] == '0') {
        todelete.push(x[i]);
      }
  } 
  for (i = 0; i < todelete.length; i++) {
    todelete[i].parentNode.removeChild(todelete[i]);
  }
}

function twix() {
  cleanComments();
  //setTimeout(cleanComments, 1000);
}
setTimeout(twix, 1000);

</script>
